<div class="container-fluid">
  <%= render 'shared/menu' %>
</div>

<%=form_with url: tab_trabajadors_path, method: :get, local: true, class: 'container-fluid d-flex justify-content-center input-group mb-3 mt-3', style: "width: 50%" do%>
  <span class="input-group-text">
    <%= label_tag :q, "Buscar:" %>
  </span>
  <div class="row">
    <%= text_field_tag :q, @search_term, placeholder: "Ingrese cedula de identidad", class: "form-control col-6" %>
  </div>
    <%= submit_tag "Buscar", class: "btn btn-secondary" %>
<% end %>

<div class= "container-fluid mt-3"> 
  <% if @sidial.nil? %>
    <div class="alert alert-light" role="alert">
      <h3>¡Realiza una busqueda para comenzar!</h3>
    </div>
  <% else %>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">cedula</th>
            <th scope="col">Nombres</th>
            <th scope="col">Estatus de Cargo</th>
            <th scope="col">Tipo Personal</th>
            <th scope="col">Descripción</th>
            <th scope="col">Detalles</th>
          </tr>
        </thead>
        <tbody>
          <% @sidial.each do |trabajador| %>
            <tr>
              <td>
                <%= trabajador.ce_trabajador %>
              </td>
              <td>
                <%= trabajador.nombres %>
              </td>
              <td>
                <%= @desc_estatus[trabajador.edo_cargo] %>
              </td>
              <td>
                <p><%= trabajador.tipopersonal %></p>
                <p><%= trabajador.descripcion_tp %></p>
              </td>
              <td>
                <%= trabajador.descripcion_cargo %>
              </td>
              <td>
                <div class="d-flex flex-column gap-3">
                <%= link_to 'Detalle de cargo', tab_trabajador_path(id: trabajador.id), class: 'd-flex flex-column' %>
                <%= link_to 'Pagos trabajador', pago_path(
                  CE_TRABAJADOR: trabajador.ce_trabajador,
                  CO_UBICACION: trabajador.co_ubicacion,
                  TIPOPERSONAL: trabajador.tipopersonal,
                  id: trabajador.id 
                ) %>
               <%= link_to 'Variaciones trabajador', variacions_path(trabajador) %>
                </div>
              </td>
            </tr>
          <%end%>
        </tbody>
      </table>
    </div>
  <% end %>
</div>
